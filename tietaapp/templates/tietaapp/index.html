{% extends "base.html" %}
{% load staticfiles %}

<!-- 写入 base.html 中定义的 title -->
{% block title %} 铁塔查询系统 {% endblock title %}
{% block content %}
  <div class="container"style="max-width: 1200px;">
<a style="text-decoration:none;font-size:20px;" href={% url 'tieta:stationinfo' %}>铁塔站址级查询</a>
<a style="text-decoration:none;font-size:20px;" href={% url 'tieta:stationcodeinfo' %}>铁塔订单级查询</a></br></br>

平均场地费：{{avg_venuefee.avg_venuefee | floatformat:0}} 元/年</br>
平均服务费：{{avg_productservicefee | floatformat:0}} 元/年</br>
年服务费：{{sum_productservicefee.sum_productservicefee | floatformat:0}} 元/年</br>
白云站址数：{{count_productservicefee.count_productservicefee}} 个</br>


 <div id="main" style="height:400px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
$.ajax({
      type: "get",
      url: "{%url 'tieta:apiecharts'%}",
      success: function (data) {

        // 指定图表的配置项和数据
        var option = {
          title: {
            left: 'center',
            text: '营服年服务费统计'
          },
          tooltip: {},
          xAxis: {
              data: data['营服']
          },
          yAxis: {},
          series: [{
            name: '年租金(元)',
            type: 'bar',
            data: data['服务费']
          }]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
      },
      error: function () {
        alert('Error: ajax 请求出错！')
      }
    });



    </script>
  </div>
{% endblock content %}

